<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</head>
<body>
    반갑다능 ★
    <div><a href="{% url 'chart-bar' %}">시작하기!</a></div>
    <input type="text" class="title" >
    <input type="text" class="content" >
    <input type="button" class="btnAjax" value="TEST">
    <table class="table">
        <thead>
            <tr>
                <th scope="col">keyword</th>
                <th scope="col">weight</th>
            </tr>
        </thead>
        <tbody id="apiTest">
        </tbody>
    </table>
</body>
<script>
    let btnAjax = document.querySelector('.btnAjax');
    btnAjax.addEventListener('click', e => {
        let title = document.querySelector('.title').value;
        let content = document.querySelector('.content').value;
        let param = {
          'title': title,
          'content' : content,
        }
        $.ajax({
            url : 'http://127.0.0.1:8000/tkt/a-test/',
            type: 'POST',
            headers: {
               'X-CSRFTOKEN' : '{{ csrf_token }}'
            },
            data: JSON.stringify(param),
            success:function(data){
                console.log(data);
            },
            error:function(){
                alert('통신 실패');
            }
        });
    });

    $.ajax({
        url: 'http://127.0.0.1:8000/tkt/json_keyword_top10/',
        dataType: "json",
        success: function (data) {
            var apiTest = "";
            for (var i = 0; i < data.data.length; i++) {
                apiTest += "<tr>"
                apiTest += "<td>" + data.labels[i] + "</td>"
                apiTest += "<td>" + data.data[i] + "</td>"
                apiTest += "</tr>"
            }
            $('[id="apiTest"]').html(apiTest);
            console.log(data.labels[0]);
            console.log(apiTest);
        },
        error: function (request, status, error) {
            console.log('실패');
        }
    });
</script>
</html>